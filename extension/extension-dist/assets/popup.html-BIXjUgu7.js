import{c as j,r as i,j as t,T as m,b as x,I as P,f as L,g as E,A as B,d as y,M as Y,i as J,R as Q}from"./theme-CWql2nic.js";import{a as w}from"./auth-kta0Vm9R.js";/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],ee=j("loader-circle",Z);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const te=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],re=j("log-out",te);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ne=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],ie=j("monitor",ne);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oe=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],se=j("square",oe);(function(){const d=document.createElement("link").relList;if(d&&d.supports&&d.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))c(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const p of o.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&c(p)}).observe(document,{childList:!0,subtree:!0});function u(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function c(n){if(n.ep)return;n.ep=!0;const o=u(n);fetch(n.href,o)}})();const C="#9d00ff",S="#00d1ff",U="#00ff94",I="rgba(255,255,255,0.04)",A="rgba(157, 0, 255, 0.25)";function ae(l){const d=Math.floor(l/3600),u=Math.floor(l%3600/60),c=l%60;return d>0?`${String(d).padStart(2,"0")}:${String(u).padStart(2,"0")}:${String(c).padStart(2,"0")}`:`${String(u).padStart(2,"0")}:${String(c).padStart(2,"0")}`}function le(){var $,k;const[l,d]=i.useState(null),[u,c]=i.useState(!0),[n,o]=i.useState(""),[p,W]=i.useState(""),[D,O]=i.useState(""),[f,b]=i.useState("PROGRAMMED"),[v,h]=i.useState(null),[q,M]=i.useState(0),[R,H]=i.useState([]),[T,z]=i.useState(null),g=i.useRef(null);i.useEffect(()=>{_()},[]),i.useEffect(()=>{chrome.runtime.sendMessage({type:"GET_STATUS"},e=>{((e==null?void 0:e.status)==="RECORDING"||(e==null?void 0:e.status)==="PROGRAMMED"||(e==null?void 0:e.status)==="PAUSED")&&b(e.status),(e==null?void 0:e.recordingStartedAt)!=null?h(e.recordingStartedAt):h(null)})},[]),i.useEffect(()=>{if(f==="RECORDING"&&v!=null){const e=()=>{M(Math.floor((Date.now()-v)/1e3))};return e(),g.current=setInterval(e,1e3),()=>{g.current&&clearInterval(g.current),g.current=null}}else M(0),g.current&&(clearInterval(g.current),g.current=null)},[f,v]),i.useEffect(()=>{!l||f==="RECORDING"||chrome.tabs.query({currentWindow:!0},e=>{const a=e.filter(r=>r.id!=null&&r.url&&(r.url.startsWith("http://")||r.url.startsWith("https://"))).map(r=>({id:r.id,title:r.title||r.url||"Aba",url:r.url||""}));H(a),a.length>0&&T===null&&chrome.tabs.query({active:!0,currentWindow:!0},([r])=>{const G=a.find(K=>K.id===(r==null?void 0:r.id));z(G?G.id:a[0].id)})})},[l,f]);const _=async()=>{const e=await w.getSession();d(e),c(!1)},X=async e=>{e.preventDefault(),c(!0),O("");try{await w.login(n,p),await _()}catch(a){O(a.message)}finally{c(!1)}},F=async()=>{await w.logout(),d(null)},V=async()=>{var a,r;const e=f==="RECORDING"?void 0:T??((a=R[0])==null?void 0:a.id)??((r=(await chrome.tabs.query({active:!0,currentWindow:!0}))[0])==null?void 0:r.id);f==="RECORDING"?(b("PROGRAMMED"),h(null)):(b("RECORDING"),h(Date.now())),chrome.runtime.sendMessage({type:f==="RECORDING"?"STOP_CAPTURE":"START_CAPTURE",tabId:e??void 0})};i.useEffect(()=>{const e=a=>{a.type==="STATUS_UPDATE"&&(b(a.status),a.status!=="RECORDING"?h(null):chrome.runtime.sendMessage({type:"GET_STATUS"},r=>{(r==null?void 0:r.recordingStartedAt)!=null&&h(r.recordingStartedAt)}))};return chrome.runtime.onMessage.addListener(e),()=>chrome.runtime.onMessage.removeListener(e)},[]);const N={width:"100%",minHeight:"380px",color:m,fontFamily:"system-ui, -apple-system, sans-serif",position:"relative",zIndex:1,padding:"20px 16px",boxSizing:"border-box"};if(u)return t.jsx("div",{style:{...N,display:"flex",alignItems:"center",justifyContent:"center",padding:40},children:t.jsx(ee,{size:28,style:{color:S},className:"animate-spin"})});if(!l)return t.jsxs("div",{style:{...N,padding:24},children:[t.jsx("h2",{style:{fontSize:15,fontWeight:600,marginBottom:20,color:m,letterSpacing:"-0.02em"},children:"Entrar"}),t.jsxs("form",{onSubmit:X,style:{display:"flex",flexDirection:"column",gap:14},children:[t.jsxs("div",{children:[t.jsx("label",{style:{display:"block",fontSize:11,fontWeight:500,marginBottom:4,color:x},children:"Email"}),t.jsx("input",{type:"email",value:n,onChange:e=>o(e.target.value),style:{width:"100%",padding:"10px 12px",borderRadius:E,border:`1px solid ${L}`,background:P,color:m,fontSize:13,boxSizing:"border-box"},required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{style:{display:"block",fontSize:11,fontWeight:500,marginBottom:4,color:x},children:"Senha"}),t.jsx("input",{type:"password",value:p,onChange:e=>W(e.target.value),style:{width:"100%",padding:"10px 12px",borderRadius:E,border:`1px solid ${L}`,background:P,color:m,fontSize:13,boxSizing:"border-box"},required:!0})]}),D&&t.jsx("p",{style:{color:B,fontSize:12},children:D}),t.jsx("button",{type:"submit",disabled:u,style:{width:"100%",padding:12,borderRadius:E,border:"none",background:`linear-gradient(135deg, ${C}, ${S})`,color:"white",fontSize:13,fontWeight:600,cursor:"pointer"},children:u?"Entrando...":"Entrar"})]})]});const s=f==="RECORDING";return t.jsxs("div",{style:N,children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:8},children:[t.jsx("span",{style:{fontSize:14,fontWeight:700,color:m,letterSpacing:"-0.03em"},children:"Call Coach"}),t.jsx("button",{onClick:F,style:{background:"none",border:"none",color:y,cursor:"pointer",padding:4},"aria-label":"Sair",children:t.jsx(re,{size:16})})]}),t.jsx("p",{style:{fontSize:10,color:x,marginBottom:16},children:($=l.user)==null?void 0:$.email}),t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:20,padding:"8px 12px",borderRadius:20,background:I,border:`1px solid ${A}`,width:"fit-content"},children:[t.jsx("div",{style:{width:8,height:8,borderRadius:"50%",background:s?U:y,animation:s?"record-dot 1.2s ease-in-out infinite":void 0}}),t.jsx("span",{style:{fontSize:11,fontWeight:600,color:s?U:x,textTransform:"uppercase",letterSpacing:"0.08em"},children:s?"Gravando":"Parado"})]}),t.jsxs("div",{style:{textAlign:"center",marginBottom:24,padding:"20px 16px",borderRadius:16,background:I,border:`1px solid ${A}`},children:[t.jsx("div",{style:{fontSize:11,color:y,marginBottom:4,textTransform:"uppercase",letterSpacing:"0.1em"},children:"Tempo de gravação"}),t.jsx("div",{style:{fontSize:42,fontWeight:700,fontVariantNumeric:"tabular-nums",color:s?"#fff":y,textShadow:s?`0 0 20px ${S}40`:void 0,letterSpacing:"0.02em"},children:s?ae(q):"00:00"})]}),!s&&R.length>0&&t.jsxs("div",{style:{marginBottom:20},children:[t.jsxs("label",{style:{display:"flex",alignItems:"center",gap:6,fontSize:11,fontWeight:500,marginBottom:8,color:x},children:[t.jsx(ie,{size:12}),"Aba"]}),t.jsx("select",{value:T??((k=R[0])==null?void 0:k.id)??"",onChange:e=>z(Number(e.target.value)||null),style:{width:"100%",padding:"10px 12px",borderRadius:E,border:`1px solid ${A}`,background:I,color:m,fontSize:12,boxSizing:"border-box"},children:R.map(e=>t.jsx("option",{value:e.id,children:e.title.length>32?e.title.slice(0,32)+"…":e.title},e.id))})]}),t.jsx("div",{style:{display:"flex",justifyContent:"center"},children:t.jsx("button",{onClick:V,style:{width:80,height:80,borderRadius:"50%",border:"none",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",background:s?`linear-gradient(135deg, ${B}, #b91c1c)`:`linear-gradient(135deg, ${C}, ${S})`,color:"white",boxShadow:s?"0 0 20px rgba(220, 38, 62, 0.5), 0 0 40px rgba(220, 38, 62, 0.2)":`0 0 24px ${C}50, 0 0 48px ${S}30`,animation:s?"neon-pulse-stop 2s ease-in-out infinite":"neon-pulse 2s ease-in-out infinite",transition:"transform 0.15s ease"},onMouseDown:e=>e.currentTarget.style.transform="scale(0.95)",onMouseUp:e=>e.currentTarget.style.transform="scale(1)",onMouseLeave:e=>e.currentTarget.style.transform="scale(1)",children:s?t.jsx(se,{size:28,fill:"currentColor"}):t.jsx(Y,{size:28})})}),t.jsx("p",{style:{textAlign:"center",fontSize:11,color:y,marginTop:12},children:s?"Clique para parar":"Clique para iniciar"})]})}J.createRoot(document.getElementById("root")).render(t.jsx(Q.StrictMode,{children:t.jsx(le,{})}));
