(function(){"use strict";function l(t){return t.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^\w\s]/g,"").trim()}function u(t,o){if(t.includes(o))return 1;const n=new Set(t.split(/\s+/)),s=o.split(/\s+/);return s.filter(e=>n.has(e)).length/s.length}function g(t,o){const n=l(t);let s=null,r=0;for(const e of o)for(const a of e.trigger_phrases){const i=l(a);let c=u(n,i);if(e.success_rate!==void 0&&e.success_rate>0){const f=e.success_rate*.15;c=c+f}c>r&&(r=c,s={score:c,objectionId:e.id,triggerPhrase:a,suggestedResponse:e.suggested_response,mentalTrigger:e.mental_trigger,coachingTip:e.coaching_tip})}return s&&s.score>.4?s:null}self.onmessage=t=>{const{requestId:o,text:n,objections:s}=t.data,r=performance.now(),e=g(n,s),a=performance.now()-r,i={requestId:o,result:e,duration:a,timestamp:Date.now()};self.postMessage(i)},console.log("âš¡ Objection Matcher Worker initialized")})();
