import"./modulepreload-polyfill-B5Qt9EMX.js";import{c as f,r,j as t,T as p,N as d,b as x,I as W,f as q,g as y,A as H,k as C,d as S,M as re,i as ie,R as oe}from"./theme-BzcN32Us.js";import{a as M}from"./auth-kta0Vm9R.js";/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const se=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],ae=f("loader-circle",se);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const le=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],de=f("log-out",le);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ce=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],ue=f("monitor",ce);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ge=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M15 3v18",key:"14nvp0"}],["path",{d:"m8 9 3 3-3 3",key:"12hl5m"}]],he=f("panel-right-close",ge);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pe=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M15 3v18",key:"14nvp0"}],["path",{d:"m10 15-3-3 3-3",key:"1pgupc"}]],fe=f("panel-right-open",pe);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const me=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],xe=f("square",me),E="rgba(255,255,255,0.04)",v="rgba(255, 0, 122, 0.25)";var K;const ye=typeof chrome<"u"&&((K=chrome.runtime)!=null&&K.getURL)?chrome.runtime.getURL("logo.svg"):"/logo.svg";function Se(s){const m=Math.floor(s/3600),c=Math.floor(s%3600/60),u=s%60;return m>0?`${String(m).padStart(2,"0")}:${String(c).padStart(2,"0")}:${String(u).padStart(2,"0")}`:`${String(c).padStart(2,"0")}:${String(u).padStart(2,"0")}`}function be(){var L,U;const[s,m]=r.useState(null),[c,u]=r.useState(!0),[k,V]=r.useState(""),[N,X]=r.useState(""),[A,D]=r.useState(""),[a,b]=r.useState("PROGRAMMED"),[j,g]=r.useState(null),[Z,O]=r.useState(0),[R,F]=r.useState([]),[T,_]=r.useState(null),[z,I]=r.useState(!1),[Y,$]=r.useState(!1),[G,P]=r.useState(null),l=r.useRef(null);r.useEffect(()=>{B()},[]),r.useEffect(()=>{const e=(i,n)=>{n==="local"&&i.sidebarOpen!=null&&I(!!i.sidebarOpen.newValue)};return chrome.storage.onChanged.addListener(e),()=>chrome.storage.onChanged.removeListener(e)},[]),r.useEffect(()=>{chrome.tabs.query({active:!0,currentWindow:!0},([e])=>{if(!(e!=null&&e.id)||!e.url){$(!1),P(null);return}P(e.id);const i=e.url.toLowerCase(),n=i.includes("meet.google.com")||i.includes("zoom.us");$(n),n&&chrome.tabs.sendMessage(e.id,{type:"GET_SIDEBAR_OPEN"},h=>{h&&typeof h.open=="boolean"&&I(h.open)})})},[]),r.useEffect(()=>{chrome.runtime.sendMessage({type:"GET_STATUS"},e=>{((e==null?void 0:e.status)==="RECORDING"||(e==null?void 0:e.status)==="PROGRAMMED"||(e==null?void 0:e.status)==="PAUSED")&&b(e.status),(e==null?void 0:e.recordingStartedAt)!=null?g(e.recordingStartedAt):g(null)})},[]),r.useEffect(()=>{if(a==="RECORDING"&&j!=null){const e=()=>{O(Math.floor((Date.now()-j)/1e3))};return e(),l.current=setInterval(e,1e3),()=>{l.current&&clearInterval(l.current),l.current=null}}else O(0),l.current&&(clearInterval(l.current),l.current=null)},[a,j]),r.useEffect(()=>{!s||a==="RECORDING"||chrome.tabs.query({currentWindow:!0},e=>{const i=e.filter(n=>n.id!=null&&n.url&&(n.url.startsWith("http://")||n.url.startsWith("https://"))).map(n=>({id:n.id,title:n.title||n.url||"Aba",url:n.url||""}));F(i),i.length>0&&T===null&&chrome.tabs.query({active:!0,currentWindow:!0},([n])=>{const h=i.find(ne=>ne.id===(n==null?void 0:n.id));_(h?h.id:i[0].id)})})},[s,a]);const B=async()=>{const e=await M.getSession();m(e),u(!1)},J=async e=>{e.preventDefault(),u(!0),D("");try{await M.login(k,N),await B()}catch(i){D(i.message)}finally{u(!1)}},Q=async()=>{await M.logout(),m(null)},ee=async()=>{var i,n;const e=a==="RECORDING"?void 0:T??((i=R[0])==null?void 0:i.id)??((n=(await chrome.tabs.query({active:!0,currentWindow:!0}))[0])==null?void 0:n.id);a==="RECORDING"?(b("PROGRAMMED"),g(null)):(b("RECORDING"),g(Date.now())),chrome.runtime.sendMessage({type:a==="RECORDING"?"STOP_CAPTURE":"START_CAPTURE",tabId:e??void 0})},te=()=>{G!=null&&chrome.tabs.sendMessage(G,{type:"TOGGLE_SIDEBAR"}).then(()=>{I(e=>!e)}).catch(()=>{})};r.useEffect(()=>{const e=i=>{i.type==="STATUS_UPDATE"&&(b(i.status),i.status!=="RECORDING"?g(null):chrome.runtime.sendMessage({type:"GET_STATUS"},n=>{(n==null?void 0:n.recordingStartedAt)!=null&&g(n.recordingStartedAt)}))};return chrome.runtime.onMessage.addListener(e),()=>chrome.runtime.onMessage.removeListener(e)},[]);const w={width:"100%",minHeight:"380px",color:p,fontFamily:"system-ui, -apple-system, sans-serif",position:"relative",zIndex:1,padding:"20px 16px",boxSizing:"border-box"};if(c)return t.jsx("div",{style:{...w,display:"flex",alignItems:"center",justifyContent:"center",padding:40},children:t.jsx(ae,{size:28,style:{color:d},className:"animate-spin"})});if(!s)return t.jsxs("div",{style:{...w,padding:24},children:[t.jsx("h2",{style:{fontSize:15,fontWeight:600,marginBottom:20,color:p,letterSpacing:"-0.02em"},children:"Entrar"}),t.jsxs("form",{onSubmit:J,style:{display:"flex",flexDirection:"column",gap:14},children:[t.jsxs("div",{children:[t.jsx("label",{style:{display:"block",fontSize:11,fontWeight:500,marginBottom:4,color:x},children:"Email"}),t.jsx("input",{type:"email",value:k,onChange:e=>V(e.target.value),style:{width:"100%",padding:"10px 12px",borderRadius:y,border:`1px solid ${q}`,background:W,color:p,fontSize:13,boxSizing:"border-box"},required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{style:{display:"block",fontSize:11,fontWeight:500,marginBottom:4,color:x},children:"Senha"}),t.jsx("input",{type:"password",value:N,onChange:e=>X(e.target.value),style:{width:"100%",padding:"10px 12px",borderRadius:y,border:`1px solid ${q}`,background:W,color:p,fontSize:13,boxSizing:"border-box"},required:!0})]}),A&&t.jsx("p",{style:{color:H,fontSize:12},children:A}),t.jsx("button",{type:"submit",disabled:c,style:{width:"100%",padding:12,borderRadius:y,border:"none",background:`linear-gradient(135deg, ${d}, ${C})`,color:"white",fontSize:13,fontWeight:600,cursor:"pointer"},children:c?"Entrando...":"Entrar"})]})]});const o=a==="RECORDING";return t.jsxs("div",{style:w,children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:8},children:[t.jsx("img",{src:ye,alt:"HelpSeller",style:{height:24,width:"auto"}}),t.jsx("button",{onClick:Q,style:{background:"none",border:"none",color:S,cursor:"pointer",padding:4},"aria-label":"Sair",children:t.jsx(de,{size:16})})]}),t.jsx("p",{style:{fontSize:10,color:x,marginBottom:16},children:(L=s.user)==null?void 0:L.email}),Y&&t.jsx("div",{style:{marginBottom:16},children:t.jsxs("button",{type:"button",onClick:te,style:{display:"flex",alignItems:"center",gap:8,width:"100%",padding:"10px 12px",borderRadius:y,border:`1px solid ${v}`,background:E,color:p,fontSize:12,fontWeight:500,cursor:"pointer"},children:[z?t.jsx(he,{size:16}):t.jsx(fe,{size:16}),z?"Ocultar painel de sugestões":"Mostrar painel de sugestões"]})}),t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:20,padding:"8px 12px",borderRadius:20,background:E,border:`1px solid ${v}`,width:"fit-content"},children:[t.jsx("div",{style:{width:8,height:8,borderRadius:"50%",background:o?d:S,animation:o?"record-dot 1.2s ease-in-out infinite":void 0}}),t.jsx("span",{style:{fontSize:11,fontWeight:600,color:o?d:x,textTransform:"uppercase",letterSpacing:"0.08em"},children:o?"Gravando":"Parado"})]}),t.jsxs("div",{style:{textAlign:"center",marginBottom:24,padding:"20px 16px",borderRadius:16,background:E,border:`1px solid ${v}`},children:[t.jsx("div",{style:{fontSize:11,color:S,marginBottom:4,textTransform:"uppercase",letterSpacing:"0.1em"},children:"Tempo de gravação"}),t.jsx("div",{style:{fontSize:42,fontWeight:700,fontVariantNumeric:"tabular-nums",color:o?"#fff":S,textShadow:o?`0 0 20px ${d}40`:void 0,letterSpacing:"0.02em"},children:o?Se(Z):"00:00"})]}),!o&&R.length>0&&t.jsxs("div",{style:{marginBottom:20},children:[t.jsxs("label",{style:{display:"flex",alignItems:"center",gap:6,fontSize:11,fontWeight:500,marginBottom:8,color:x},children:[t.jsx(ue,{size:12}),"Aba"]}),t.jsx("select",{value:T??((U=R[0])==null?void 0:U.id)??"",onChange:e=>_(Number(e.target.value)||null),style:{width:"100%",padding:"10px 12px",borderRadius:y,border:`1px solid ${v}`,background:E,color:p,fontSize:12,boxSizing:"border-box"},children:R.map(e=>t.jsx("option",{value:e.id,children:e.title.length>32?e.title.slice(0,32)+"…":e.title},e.id))})]}),t.jsx("div",{style:{display:"flex",justifyContent:"center"},children:t.jsx("button",{onClick:ee,style:{width:80,height:80,borderRadius:"50%",border:"none",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",background:o?`linear-gradient(135deg, ${H}, #b91c1c)`:`linear-gradient(135deg, ${d}, ${C})`,color:"white",boxShadow:o?"0 0 20px rgba(220, 38, 62, 0.5), 0 0 40px rgba(220, 38, 62, 0.2)":`0 0 24px ${d}50, 0 0 48px ${C}30`,animation:o?"neon-pulse-stop 2s ease-in-out infinite":"neon-pulse 2s ease-in-out infinite",transition:"transform 0.15s ease"},onMouseDown:e=>e.currentTarget.style.transform="scale(0.95)",onMouseUp:e=>e.currentTarget.style.transform="scale(1)",onMouseLeave:e=>e.currentTarget.style.transform="scale(1)",children:o?t.jsx(xe,{size:28,fill:"currentColor"}):t.jsx(re,{size:28})})}),t.jsx("p",{style:{textAlign:"center",fontSize:11,color:S,marginTop:12},children:o?"Clique para parar":"Clique para iniciar"})]})}ie.createRoot(document.getElementById("root")).render(t.jsx(oe.StrictMode,{children:t.jsx(be,{})}));
