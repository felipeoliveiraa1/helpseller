import{c as x,R as L,r as c,j as n,T,B as U,a as f,b as d,A as G,d as v,I as K,e as X,f as ce,g as R,h as _e,M as Le,i as Oe}from"./theme-BzcN32Us.js";import{a as Y}from"./auth-kta0Vm9R.js";/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Be=[["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M17 20v2",key:"1rnc9c"}],["path",{d:"M17 2v2",key:"11trls"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M2 17h2",key:"7oei6x"}],["path",{d:"M2 7h2",key:"asdhe0"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"M20 17h2",key:"1fpfkl"}],["path",{d:"M20 7h2",key:"1o8tra"}],["path",{d:"M7 20v2",key:"4gnj0m"}],["path",{d:"M7 2v2",key:"1i4yhu"}],["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"8",y:"8",width:"8",height:"8",rx:"1",key:"z9xiuo"}]],$e=x("cpu",Be);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ue=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],de=x("grip-vertical",Ue);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ge=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],ue=x("lightbulb",Ge);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const We=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],He=x("message-square",We);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qe=[["path",{d:"M5 12h14",key:"1ays0h"}]],Fe=x("minus",qe);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xe=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],Ye=x("shopping-cart",Xe);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ve=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],Qe=x("sparkles",Ve);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ze=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],Je=x("target",Ze);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ke=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],et=x("triangle-alert",Ke);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tt=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],ke=x("x",tt);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ot=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],nt=x("zap",ot),pe=e=>{let t;const o=new Set,s=(p,A)=>{const S=typeof p=="function"?p(t):p;if(!Object.is(S,t)){const N=t;t=A??(typeof S!="object"||S===null)?S:Object.assign({},t,S),o.forEach(w=>w(t,N))}},i=()=>t,j={setState:s,getState:i,getInitialState:()=>M,subscribe:p=>(o.add(p),()=>o.delete(p))},M=t=e(s,i,j);return j},it=e=>e?pe(e):pe,st=e=>e;function rt(e,t=st){const o=L.useSyncExternalStore(e.subscribe,L.useCallback(()=>t(e.getState()),[e,t]),L.useCallback(()=>t(e.getInitialState()),[e,t]));return L.useDebugValue(o),o}const me=e=>{const t=it(e),o=s=>rt(t,s);return Object.assign(o,t),o},at=e=>e?me(e):me,lt=at((e,t)=>({isMinimized:!1,isDark:!0,showEndModal:!1,connectionStatus:"disconnected",timer:0,startTime:null,currentStageIndex:0,stages:[{id:"1",name:"Situa√ß√£o",status:"current"},{id:"2",name:"Problema",status:"pending"},{id:"3",name:"Implica√ß√£o",status:"pending"},{id:"4",name:"Necessidade",status:"pending"}],nextStep:"Pr√≥ximo Passo SPIN",nextStepQuestion:"",leadProfile:"rational",buyingSignalsCount:0,activeSpeaker:"lead",currentSpinPhase:null,cards:[],toggleMinimize:()=>e(o=>({isMinimized:!o.isMinimized})),toggleTheme:()=>e(o=>({isDark:!o.isDark})),setConnectionStatus:o=>e({connectionStatus:o}),startTimer:()=>{t().startTime||e({startTime:Date.now()})},stopTimer:()=>e({startTime:null}),addCard:o=>e(s=>({cards:[{id:Math.random().toString(36).substring(7),timestamp:Date.now(),isDismissed:!1,...o},...s.cards].slice(0,20)})),dismissCard:o=>e(s=>({cards:s.cards.map(i=>i.id===o?{...i,isDismissed:!0}:i)})),setStage:o=>e(s=>({currentStageIndex:o,stages:s.stages.map((i,l)=>({...i,status:l<o?"completed":l===o?"current":"pending"}))})),setLeadProfile:o=>e({leadProfile:o}),setSpeaker:o=>e({activeSpeaker:o}),setCallSummary:o=>e({showEndModal:o}),setSpinPhase:o=>e({currentSpinPhase:o}),cachedObjections:[],scriptId:null,cacheTimestamp:null,loadScriptData:(o,s)=>{console.log(`üì¶ Caching ${s.length} objections for script ${o}`),e({scriptId:o,cachedObjections:s,cacheTimestamp:Date.now()})},clearCache:()=>{console.log("üóëÔ∏è Clearing objection cache"),e({cachedObjections:[],scriptId:null,cacheTimestamp:null})}}));function ct({card:e,onDismiss:t}){var p,A,S,N,w;const o=lt(m=>m.dismissCard),[s,i]=c.useState(!1),l=()=>{t?t(e.id):o(e.id)};c.useEffect(()=>{const m=setTimeout(()=>i(!0),50);return()=>clearTimeout(m)},[]);const k=(m,I)=>{if(m==="manager-whisper"||(I==null?void 0:I.source)==="manager")return n.jsx(He,{size:14,style:{color:d}});switch(m){case"signal":return n.jsx(Ye,{size:14,style:{color:d}});case"objection":return n.jsx(nt,{size:14,style:{color:d}});case"tip":return n.jsx(ue,{size:14,style:{color:d}});case"alert":return n.jsx(et,{size:14,style:{color:G}});case"reinforcement":return n.jsx(Qe,{size:14,style:{color:d}});default:return n.jsx(ue,{size:14,style:{color:v}})}};if(e.isDismissed)return null;const j=e.type==="manager-whisper"||((p=e.metadata)==null?void 0:p.source)==="manager"?"Gestor":e.type.replace("-"," "),M=((A=e.metadata)==null?void 0:A.urgency)==="high"||((S=e.metadata)==null?void 0:S.urgency)==="urgent";return n.jsxs("div",{style:{position:"relative",width:"100%",borderRadius:"8px",border:`1px solid ${f}`,padding:10,marginBottom:8,background:U,color:T,opacity:s?1:0,transform:s?"translateX(0)":"translateX(8px)",transition:"opacity 0.2s, transform 0.2s"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"space-between",gap:8,marginBottom:4},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,minWidth:0,flex:1},children:[k(e.type,e.metadata),n.jsx("span",{style:{fontSize:10,fontWeight:600,textTransform:"uppercase",letterSpacing:"0.05em",color:d,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:j}),M&&n.jsx("span",{style:{fontSize:9,fontWeight:600,color:G,background:"rgba(220,38,38,0.15)",padding:"2px 6px",borderRadius:4,flexShrink:0},children:"Urgente"}),((N=e.metadata)==null?void 0:N.phase)&&n.jsxs("span",{style:{fontSize:9,fontWeight:600,color:v,background:f,padding:"2px 6px",borderRadius:4,flexShrink:0},children:["SPIN:",String(e.metadata.phase)]})]}),n.jsx("button",{onClick:l,style:{flexShrink:0,padding:4,borderRadius:4,border:"none",background:"transparent",color:v,cursor:"pointer",display:"flex"},"aria-label":"Fechar",children:n.jsx(ke,{size:12})})]}),n.jsx("h4",{style:{fontWeight:500,fontSize:13,marginBottom:2,color:T,lineHeight:1.25},children:e.title}),n.jsx("p",{style:{fontSize:12,color:d,lineHeight:1.5},children:e.description.split(/(\*\*.*?\*\*)/).map((m,I)=>m.startsWith("**")&&m.endsWith("**")?n.jsx("strong",{style:{color:T,fontWeight:700},children:m.slice(2,-2)},I):m)}),e.type==="objection"&&((w=e.metadata)==null?void 0:w.objection)&&n.jsxs("div",{style:{marginTop:6,display:"flex",alignItems:"center",gap:6,fontSize:11,color:d,background:K,borderRadius:4,padding:"4px 8px",border:`1px solid ${f}`},children:[n.jsx(Je,{size:10,style:{flexShrink:0}}),n.jsx("span",{style:{fontWeight:500,color:v},children:"Obje√ß√£o:"})," ",String(e.metadata.objection)]})]})}var ve;const he=typeof chrome<"u"&&((ve=chrome.runtime)!=null&&ve.getURL)?chrome.runtime.getURL("logo.svg"):"",_=360,ge="80vh",V=48,Q=56;function dt(e){const t=e.target.getRootNode();return t&&"host"in t?t.host:document.getElementById("sales-copilot-root")}function $(){return document.getElementById("sales-copilot-root")}function ut(){var ae;const[e,t]=c.useState(null),[o,s]=c.useState(!0),[i,l]=c.useState(""),[k,j]=c.useState(""),[M,p]=c.useState(""),[A,S]=c.useState([]),[N,w]=c.useState([]),[m,I]=c.useState(null),[bt,O]=c.useState("warm"),[ee,te]=c.useState(!1),[xt,oe]=c.useState(null),[D,ne]=c.useState(!1),z=c.useRef({startX:0,startY:0,startLeft:0,startTop:0,panelW:_,panelH:300});c.useEffect(()=>{const r=$();r&&chrome.storage.local.get(["sidebarPosition","sidebarMinimized"],a=>{const h=a.sidebarPosition,E=Math.max(0,window.innerWidth-_-16);r.style.left=((h==null?void 0:h.left)??E)+"px",r.style.top=((h==null?void 0:h.top)??16)+"px";const u=a.sidebarMinimized??!1;ne(u),r.style.width=u?V+"px":_+"px",r.style.height=u?Q+"px":ge})},[]),c.useEffect(()=>{const r=$();r&&(r.style.width=D?V+"px":_+"px",r.style.height=D?Q+"px":ge,chrome.storage.local.set({sidebarMinimized:D}))},[D]);const ie=r=>{if(r.target.closest("button"))return;const a=dt(r);if(!a)return;r.preventDefault();const h=D?V:_,E=a.style.left||"",u=a.style.top||"",g=E?parseFloat(E):window.innerWidth-h-16,b=u?parseFloat(u):16,H=Number.isNaN(g)?0:Math.max(0,g),q=Number.isNaN(b)?0:Math.max(0,b);z.current={startX:r.clientX,startY:r.clientY,startLeft:H,startTop:q,panelW:h,panelH:D?Q:200};const B=P=>{const Ne=P.clientX-z.current.startX,De=P.clientY-z.current.startY,F=$();if(F){const ze=window.innerWidth-z.current.panelW-8,Re=window.innerHeight-z.current.panelH-8,Ae=Math.max(0,Math.min(ze,z.current.startLeft+Ne)),Pe=Math.max(0,Math.min(Re,z.current.startTop+De));F.style.left=Ae+"px",F.style.top=Pe+"px"}},le=()=>{document.removeEventListener("mousemove",B),document.removeEventListener("mouseup",le);const P=$();P&&chrome.storage.local.set({sidebarPosition:{left:parseFloat(P.style.left||"0")||0,top:parseFloat(P.style.top||"0")||0}})};document.addEventListener("mousemove",B),document.addEventListener("mouseup",le)},se=()=>ne(r=>!r);c.useEffect(()=>{re()},[]);const re=async()=>{const r=await Y.getSession();t(r),s(!1)},Ie=async r=>{r.preventDefault(),s(!0),p("");try{await Y.login(i,k),await re()}catch(a){p(a.message)}finally{s(!1)}},Te=async()=>{await Y.logout(),t(null),te(!1)};c.useEffect(()=>{const r=a=>{var h,E;if(a.type==="TRANSCRIPT_RESULT"){console.log("Sidebar received transcript:",a.data);const u={text:a.data.text,isFinal:a.data.isFinal,timestamp:a.data.timestamp,speaker:a.data.speaker||"unknown"};if(S(g=>[...g,u]),a.data.text.toLowerCase().includes("pre√ßo")){const g={id:Math.random().toString(36),type:"objection",title:"Obje√ß√£o de Pre√ßo",description:"Foque no valor, n√£o no pre√ßo. Destaque os benef√≠cios.",timestamp:Date.now(),isDismissed:!1};w(b=>[g,...b]),O("warm")}else if(a.data.text.toLowerCase().includes("interessante")){const g={id:Math.random().toString(36),type:"signal",title:"Sinal de Compra",description:"Lead engajado! Pergunte sobre o timeline de decis√£o.",timestamp:Date.now(),isDismissed:!1};w(b=>[g,...b]),O("hot")}else if(a.data.text.toLowerCase().includes("n√£o")){const g={id:Math.random().toString(36),type:"alert",title:"Poss√≠vel Obje√ß√£o",description:"Fa√ßa perguntas abertas para entender.",timestamp:Date.now(),isDismissed:!1};w(b=>[g,...b]),O("cold")}}else if(a.type==="STATUS_UPDATE")te(a.status==="RECORDING"),a.status==="RECORDING"&&typeof a.micAvailable=="boolean"&&oe(a.micAvailable),a.status!=="RECORDING"&&oe(null),a.status==="PERMISSION_REQUIRED"&&alert("Permiss√£o necess√°ria. Clique no √≠cone da extens√£o na barra do navegador para autorizar a captura da aba.");else if(a.type==="MANAGER_WHISPER")I({content:a.data.content,urgency:a.data.urgency,timestamp:a.data.timestamp});else if(a.type==="COACHING_MESSAGE"){const u=a.data,g=u.type==="objection"&&((h=u.metadata)==null?void 0:h.objection),b=((E=u.metadata)==null?void 0:E.phase)||null,H={S:"Situa√ß√£o",P:"Problema",I:"Implica√ß√£o",N:"Necessidade"},q={id:Math.random().toString(36).substring(7),type:g?"objection":"tip",title:g?"Obje√ß√£o Detectada":`${b?H[b]||"SPIN":"Dica"} ‚Äî Pr√≥ximo Passo`,description:u.content,timestamp:Date.now(),isDismissed:!1,metadata:{...u.metadata,urgency:u.urgency}};w(B=>[q,...B].slice(0,10)),(g||u.urgency==="high")&&O("hot")}};return chrome.runtime.onMessage.addListener(r),()=>chrome.runtime.onMessage.removeListener(r)},[]);const W={width:"100%",minHeight:0,flex:1,display:"flex",flexDirection:"column",backgroundColor:X,fontFamily:"system-ui, -apple-system, sans-serif",color:T};return o?n.jsx("div",{style:{...W,height:"100%",display:"flex",alignItems:"center",justifyContent:"center"},children:n.jsx("span",{style:{color:d,fontSize:13},children:"Carregando..."})}):e?D?n.jsx("div",{onMouseDown:ie,style:{width:"100%",height:"100%",backgroundColor:X,display:"flex",alignItems:"center",justifyContent:"center",fontFamily:"system-ui, -apple-system, sans-serif",borderRight:`1px solid ${f}`,cursor:"move",userSelect:"none"},children:n.jsx("button",{onClick:se,title:"Expandir",style:{width:32,height:32,borderRadius:R,border:`1px solid ${f}`,background:U,color:d,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:n.jsx(de,{size:16,style:{transform:"rotate(-90deg)"}})})}):n.jsxs("div",{style:{...W,height:"100%"},children:[n.jsxs("div",{onMouseDown:ie,style:{padding:12,borderBottom:`1px solid ${f}`,display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"move",userSelect:"none",flexShrink:0},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10},children:[n.jsx(de,{size:14,style:{color:v}}),he?n.jsx("img",{src:he,alt:"HelpSeller",style:{height:20,width:"auto"}}):n.jsx(Le,{size:16,style:{color:ee?G:v}}),n.jsxs("div",{children:[n.jsxs("div",{style:{fontSize:11,fontWeight:600,color:d},children:["HelpSeller ¬∑ ",ee?"Gravando":"Parado"]}),n.jsx("div",{style:{fontSize:10,color:v},children:(ae=e.user)==null?void 0:ae.email})]})]}),n.jsxs("div",{style:{display:"flex",gap:6,alignItems:"center"},onClick:r=>r.stopPropagation(),children:[n.jsx("button",{onClick:se,title:"Minimizar",style:{padding:6,background:"transparent",border:`1px solid ${f}`,borderRadius:R,color:d,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:n.jsx(Fe,{size:14})}),n.jsx("button",{onClick:Te,style:{padding:6,fontSize:11,background:"transparent",border:`1px solid ${f}`,borderRadius:R,color:d,cursor:"pointer"},children:"Sair"})]})]}),m&&n.jsxs("div",{style:{padding:12,background:U,borderBottom:`1px solid ${f}`,flexShrink:0},children:[n.jsxs("div",{style:{fontSize:10,fontWeight:600,marginBottom:6,color:d,textTransform:"uppercase",letterSpacing:"0.05em",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[n.jsx("span",{children:"Gestor"}),n.jsx("button",{onClick:()=>I(null),style:{background:"none",border:"none",color:v,cursor:"pointer",padding:0,display:"flex"},children:n.jsx(ke,{size:14})})]}),n.jsx("div",{style:{fontSize:13,lineHeight:1.5,color:T},children:m.content})]}),n.jsxs("div",{style:{flex:"1 1 0",minHeight:0,overflowY:"auto",padding:"12px 12px 0",borderBottom:`1px solid ${f}`,display:"flex",flexDirection:"column",gap:8,backgroundColor:X},children:[n.jsx("div",{style:{fontSize:10,fontWeight:600,marginBottom:4,color:v,textTransform:"uppercase",letterSpacing:"0.05em",flexShrink:0},children:"Insights"}),N.length===0?n.jsx("div",{style:{fontSize:12,color:v,paddingBottom:12},children:"Aguardando an√°lise..."}):N.map(r=>n.jsx("div",{style:{flexShrink:0},children:n.jsx(ct,{card:r,onDismiss:a=>w(h=>h.filter(E=>E.id!==a))})},r.id))]}),n.jsx("div",{style:{padding:"10px 12px",borderTop:`1px solid ${f}`,flexShrink:0},children:n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,padding:"8px 10px",backgroundColor:U,border:`1px solid ${f}`,borderRadius:R,fontSize:11,color:d},children:[n.jsx($e,{size:12}),"Analisando em tempo real"]})})]}):n.jsxs("div",{style:{...W,height:"100%",padding:24},children:[n.jsx("h2",{style:{fontSize:14,fontWeight:600,marginBottom:20,color:T},children:"Entrar"}),n.jsxs("form",{onSubmit:Ie,style:{display:"flex",flexDirection:"column",gap:14},children:[n.jsxs("div",{children:[n.jsx("label",{style:{display:"block",fontSize:11,fontWeight:500,marginBottom:6,color:d},children:"Email"}),n.jsx("input",{type:"email",value:i,onChange:r=>l(r.target.value),style:{width:"100%",padding:"8px 10px",borderRadius:R,border:`1px solid ${ce}`,background:K,color:T,fontSize:13},required:!0})]}),n.jsxs("div",{children:[n.jsx("label",{style:{display:"block",fontSize:11,fontWeight:500,marginBottom:6,color:d},children:"Senha"}),n.jsx("input",{type:"password",value:k,onChange:r=>j(r.target.value),style:{width:"100%",padding:"8px 10px",borderRadius:R,border:`1px solid ${ce}`,background:K,color:T,fontSize:13},required:!0})]}),M&&n.jsx("p",{style:{color:G,fontSize:12},children:M}),n.jsx("button",{type:"submit",disabled:o,style:{width:"100%",padding:10,borderRadius:R,border:"none",background:_e,color:"white",fontSize:13,fontWeight:500,cursor:"pointer"},children:o?"Entrando...":"Entrar"})]})]})}const pt=[/microfone/i,/c√¢mera/i,/camera/i,/desativar/i,/ativar/i,/ctrl\s*\+/i,/alt\s*\+/i,/devices?$/i,/configura√ß√µes/i,/settings/i,/mute/i,/unmute/i,/turn\s+(on|off)/i,/apresentar/i,/present/i,/chat/i,/meet\.google/i,/participants/i,/participantes/i,/legendas/i,/captions/i,/mais\s+op√ß√µes/i,/more\s+options/i,/sair/i,/leave/i,/^\d+$/,/^[a-z]$/i];function fe(e){const t=e.trim();if(t.length<2||t.length>50)return!1;for(const o of pt)if(o.test(t))return!1;if(t.length>10){const o=Math.floor(t.length/2),s=t.substring(0,o).toLowerCase().trim(),i=t.substring(o).toLowerCase().trim();if(s===i)return!1}return!0}function je(e){let t=e.trim();t=t.replace(/devices$/i,"").trim();for(let o=Math.floor(t.length/2)-2;o<=Math.ceil(t.length/2)+2;o++)if(o>0&&o<t.length){const s=t.substring(0,o).trim(),i=t.substring(o).trim();if(s.toLowerCase()===i.toLowerCase())return s}return t}const mt=["[data-self-name]",".zWGUib",".adnwBd",".YTbUzc",".cS7aqe"];function Me(){let e="";const t=new Set;for(const s of mt)try{document.querySelectorAll(s).forEach(i=>{var j;let l="";const k=i;if(k.hasAttribute("data-self-name"))l=(k.getAttribute("data-self-name")||"").trim(),l&&(e=l);else{const M=Array.from(i.childNodes).filter(p=>p.nodeType===Node.TEXT_NODE);M.length>0?l=(M[0].textContent||"").trim():l=((j=(k.innerText||"").split(`
`)[0])==null?void 0:j.trim())||""}l&&fe(l)&&t.add(l)})}catch{}const o=[];if(t.forEach(s=>{s!==e&&!o.includes(s)&&o.push(s)}),o.length===0){const i=document.title.replace(/\s*[-‚Äì]\s*Google Meet.*$/i,"").trim();i&&i!=="Meeting"&&fe(i)&&o.push(i)}return{selfName:e,otherNames:o}}function ht(){const{selfName:e,otherNames:t}=Me(),o=t.filter(i=>i!==e).map(je).filter(i=>i.length>1),s=o[0]||null;(s||o.length>0)&&chrome.runtime.sendMessage({type:"PARTICIPANT_INFO",leadName:s||"Lead",selfName:e,allParticipants:o}).catch(()=>{})}let ye=null,be=null;function xe(e){const{selfName:t,otherNames:o}=Me(),s=o.filter(l=>l!==t).map(je).filter(l=>l.length>1),i=s[0]||null;i&&i!==e.value&&(e.value=i,chrome.runtime.sendMessage({type:"PARTICIPANT_INFO",leadName:i,selfName:t,allParticipants:s}).catch(()=>{}))}function Se(){if(ye)return;const e={value:""};function t(){xe(e)}t(),ye=setInterval(t,2e3),be=new MutationObserver(()=>xe(e)),be.observe(document.body,{childList:!0,subtree:!0})}function gt(){const e=['[jsname="RKGaOc"]','[jsname="EaZ7Me"]','div[role="region"]'];for(const s of e){const i=document.querySelector(s);if(i){const l=i.querySelector('[aria-label*="microphone" i], [aria-label*="microfone" i], [data-tooltip*="microphone" i], [data-tooltip*="microfone" i]');if(l)return Z(l,`${s} > mic button`)}}const t=document.querySelector('button[jsname="BOHaEe"]')||document.querySelector('div[jsname="BOHaEe"]');if(t)return Z(t,"jsname BOHaEe");const o=document.querySelectorAll('[aria-label*="microphone" i], [aria-label*="microfone" i]');for(const s of o)if(!(s.closest('[role="listitem"], [role="list"], [jsname="jrQDbd"], [data-participant-id]')||s.getAttribute("role")!=="button"&&s.tagName.toLowerCase()!=="button"))return Z(s,"aria-label mic button");return console.log("üé§ [MIC DEBUG] No mic button found, assuming unmuted"),!1}function Z(e,t){const o=e.getAttribute("data-is-muted");if(o==="true")return console.log(`üé§ [MIC DEBUG] MUTED via data-is-muted on ${t}`),!0;if(o==="false")return console.log(`üé§ [MIC DEBUG] UNMUTED via data-is-muted on ${t}`),!1;const s=e.getAttribute("aria-pressed");if(s==="true")return console.log(`üé§ [MIC DEBUG] MUTED via aria-pressed on ${t}`),!0;if(s==="false")return console.log(`üé§ [MIC DEBUG] UNMUTED via aria-pressed on ${t}`),!1;const i=(e.getAttribute("aria-label")||e.getAttribute("data-tooltip")||"").toLowerCase();return i.includes("ativar")||i.includes("turn on")||i.includes("unmute")||i.includes("ligar")?(console.log(`üé§ [MIC DEBUG] MUTED via label "${i}" on ${t}`),!0):i.includes("desativar")||i.includes("turn off")||i.includes("mute")||i.includes("desligar")?(console.log(`üé§ [MIC DEBUG] UNMUTED via label "${i}" on ${t}`),!1):(console.log(`üé§ [MIC DEBUG] Could not determine state for ${t}, assuming unmuted`),!1)}let we=null;function ft(){if(we)return;let e=null;console.log("üé§ [MIC MONITOR] Started mic state monitoring"),we=setInterval(()=>{const t=gt();t!==e&&(e=t,console.log(`üé§ [MIC MONITOR] State changed: ${t?"MUTED":"UNMUTED"}`),chrome.runtime.sendMessage({type:"MIC_STATE",muted:t}).catch(()=>{}))},1e3)}console.log("HelpSeller Content Script Loaded");if(window.location.hostname==="meet.google.com"){Se(),ft(),document.readyState!=="complete"&&window.addEventListener("load",()=>Se());const e=()=>{chrome.runtime.sendMessage({type:"TRY_END_CALL"}).catch(()=>{})};window.addEventListener("beforeunload",e),window.addEventListener("pagehide",e)}const y=document.createElement("div");y.id="sales-copilot-root";y.style.cssText="position:fixed;width:0;height:80vh;z-index:2147483647;transition: width 0.2s ease, height 0.2s ease;border-radius:12px;overflow:hidden;box-shadow:0 4px 24px rgba(0,0,0,0.5), 0 0 0 1px rgba(255,0,122,0.1);";document.body.appendChild(y);chrome.storage.local.get(["sidebarPosition"],e=>{const t=e.sidebarPosition,o=Math.max(0,window.innerWidth-360-16);y.style.left=((t==null?void 0:t.left)??o)+"px",y.style.top=((t==null?void 0:t.top)??16)+"px"});const Ee=y.attachShadow({mode:"open"}),Ce=document.createElement("style");Ce.textContent=`
    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
    }
    
    :host {
        display: block;
        width: 100%;
        height: 100%;
        min-height: 0;
    }

    :host > div {
        min-height: 0;
        height: 100%;
    }

    body, div, span, button, input, p, h1, h2, h3, h4 {
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
        line-height: 1.5;
    }
    
    /* Container base */
    .h-full { height: 100%; }
    .flex { display: flex; }
    .flex-col { flex-direction: column; }
    .items-center { align-items: center; }
    .justify-between { justify-content: space-between; }
    .space-x-2 > * + * { margin-left: 0.5rem; }
    .space-x-3 > * + * { margin-left: 0.75rem; }
    .space-y-1 > * + * { margin-top: 0.25rem; }
    .space-y-2 > * + * { margin-top: 0.5rem; }
    
    /* Colors - black + pink theme */
    .bg-\\[\\#1A1B2E\\] { background-color: #0d0d0d; }
    .bg-\\[\\#252640\\] { background-color: #1a1a1a; }
    .text-white { color: white; }
    .text-blue-400 { color: #ff007a; }
    .text-slate-400 { color: #a1a1aa; }
    .text-slate-300 { color: #d4d4d8; }
    .text-emerald-400 { color: #ff007a; }
    
    /* Borders */
    .border-b { border-bottom-width: 1px; }
    .border-white\\/10 { border-color: rgba(255, 0, 122, 0.15); }
    .border-white\\/5 { border-color: rgba(255, 0, 122, 0.08); }
    
    /* Padding & Margin */
    .p-1 { padding: 0.25rem; }
    .p-2 { padding: 0.5rem; }
    .p-3 { padding: 0.75rem; }
    .p-4 { padding: 1rem; }
    .px-4 { padding-left: 1rem; padding-right: 1rem; }
    .py-1 { padding-top: 0.25rem; padding-bottom: 0.25rem; }
    .py-2 { padding-top: 0.5rem; padding-bottom: 0.5rem; }
    .py-3 { padding-top: 0.75rem; padding-bottom: 0.75rem; }
    .mb-1 { margin-bottom: 0.25rem; }
    .mb-2 { margin-bottom: 0.5rem; }
    .mb-3 { margin-bottom: 0.75rem; }
    .mb-6 { margin-bottom: 1.5rem; }
    
    /* Sizing */
    .h-14 { height: 3.5rem; }
    .w-2 { width: 0.5rem; }
    .w-3 { width: 0.75rem; }
    .h-2 { height: 0.5rem; }
    .h-3 { height: 0.75rem; }
    .shrink-0 { flex-shrink: 0; }
    .flex-1 { flex: 1 1 0%; }
    
    /* Text */
    .text-xs { font-size: 0.75rem; }
    .text-sm { font-size: 0.875rem; }
    .text-lg { font-size: 1.125rem; }
    .font-bold { font-weight: 700; }
    .font-semibold { font-weight: 600; }
    .font-medium { font-weight: 500; }
    .font-mono { font-family: ui-monospace, monospace; }
    .uppercase { text-transform: uppercase; }
    .tracking-tight { letter-spacing: -0.025em; }
    .tracking-wider { letter-spacing: 0.05em; }
    .leading-tight { line-height: 1.25; }
    .leading-relaxed { line-height: 1.625; }
    
    /* Effects */
    .rounded { border-radius: 0.25rem; }
    .rounded-lg { border-radius: 0.5rem; }
    .rounded-full { border-radius: 9999px; }
    .opacity-50 { opacity: 0.5; }
    .opacity-80 { opacity: 0.8; }
    .opacity-90 { opacity: 0.9; }
    
    /* Transitions */
    .transition-colors { transition-property: color, background-color, border-color; transition-duration: 150ms; }
    .transition-all { transition-property: all; transition-duration: 150ms; }
    .duration-300 { transition-duration: 300ms; }
    
    /* Hover states */
    .hover\\:bg-white\\/10:hover { background-color: rgba(255, 255, 255, 0.1); }
    .hover\\:bg-white\\/5:hover { background-color: rgba(255, 255, 255, 0.05); }
    
    /* Cursor */
    .cursor-pointer { cursor: pointer; }
    
    /* Overflow */
    .overflow-y-auto { overflow-y: auto; }
    .overflow-hidden { overflow: hidden; }
    
    /* Position */
    .relative { position: relative; }
    .fixed { position: fixed; }
    
    /* Animations */
    @keyframes pulse {
        0%, 100% { opacity: 1; }
        50% { opacity: 0.5; }
    }
    .animate-pulse { animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite; }
    
    .bg-green-500 { background-color: #22c55e; }
    .bg-yellow-500 { background-color: #eab308; }
    .bg-red-500 { background-color: #ef4444; }
    
    /* Scrollbar */
    .custom-scrollbar::-webkit-scrollbar {
        width: 6px;
    }
    .custom-scrollbar::-webkit-scrollbar-track {
        background: rgba(0, 0, 0, 0.1);
    }
    .custom-scrollbar::-webkit-scrollbar-thumb {
        background: rgba(255, 0, 122, 0.35);
        border-radius: 3px;
    }
`;Ee.appendChild(Ce);const yt=Oe.createRoot(Ee);let C=!1;function J(e){chrome.storage.local.set({sidebarOpen:e}).catch(()=>{})}chrome.runtime.onMessage.addListener((e,t,o)=>{if(console.log("Content script received message:",e.type),e.type==="TOGGLE_SIDEBAR")C=!C,y.style.width=C?"360px":"0",y.style.height="80vh",J(C),console.log("Sidebar toggled:",C?"OPEN":"CLOSED");else if(e.type==="OPEN_SIDEBAR")C=!0,y.style.width="360px",y.style.height="80vh",J(!0),console.log("Sidebar opened");else if(e.type==="CLOSE_SIDEBAR")C=!1,y.style.width="0",J(!1),console.log("Sidebar closed");else{if(e.type==="GET_SIDEBAR_OPEN")return o({open:C}),!0;e.type==="STATUS_UPDATE"&&e.status==="RECORDING"&&window.location.hostname==="meet.google.com"&&ht()}});console.log("Rendering Sidebar component...");yt.render(n.jsx(L.StrictMode,{children:n.jsx(ut,{})}));console.log("Sidebar component rendered. Host element:",y);
