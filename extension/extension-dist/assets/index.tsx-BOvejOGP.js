import{c as M,R as P,r as u,j as n,T as A,B as G,a as v,b as m,A as Q,d as k,I as Te,e as Y,f as $,M as De,g as ze}from"./theme-BJTjYQlA.js";import{a as oe}from"./auth-DmuFIzIA.js";/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Re=[["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M17 20v2",key:"1rnc9c"}],["path",{d:"M17 2v2",key:"11trls"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M2 17h2",key:"7oei6x"}],["path",{d:"M2 7h2",key:"asdhe0"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"M20 17h2",key:"1fpfkl"}],["path",{d:"M20 7h2",key:"1o8tra"}],["path",{d:"M7 20v2",key:"4gnj0m"}],["path",{d:"M7 2v2",key:"1i4yhu"}],["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"8",y:"8",width:"8",height:"8",rx:"1",key:"z9xiuo"}]],Ae=M("cpu",Re);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oe=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],ne=M("grip-vertical",Oe);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _e=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],ie=M("lightbulb",_e);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Le=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],Pe=M("message-square",Le);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Be=[["path",{d:"M5 12h14",key:"1ays0h"}]],$e=M("minus",Be);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ue=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],Ge=M("shopping-cart",Ue);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const He=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],We=M("sparkles",He);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qe=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],Fe=M("target",qe);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xe=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Ye=M("triangle-alert",Xe);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ve=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],ye=M("x",Ve);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qe=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],Ze=M("zap",Qe),se=e=>{let t;const o=new Set,i=(h,z)=>{const y=typeof h=="function"?h(t):h;if(!Object.is(y,t)){const I=t;t=z??(typeof y!="object"||y===null)?y:Object.assign({},t,y),o.forEach(N=>N(t,I))}},s=()=>t,d={setState:i,getState:s,getInitialState:()=>E,subscribe:h=>(o.add(h),()=>o.delete(h))},E=t=e(i,s,d);return d},Je=e=>e?se(e):se,Ke=e=>e;function et(e,t=Ke){const o=P.useSyncExternalStore(e.subscribe,P.useCallback(()=>t(e.getState()),[e,t]),P.useCallback(()=>t(e.getInitialState()),[e,t]));return P.useDebugValue(o),o}const ae=e=>{const t=Je(e),o=i=>et(t,i);return Object.assign(o,t),o},tt=e=>e?ae(e):ae,ot=tt((e,t)=>({isMinimized:!1,isDark:!0,showEndModal:!1,connectionStatus:"disconnected",timer:0,startTime:null,currentStageIndex:0,stages:[{id:"1",name:"Situa√ß√£o",status:"current"},{id:"2",name:"Problema",status:"pending"},{id:"3",name:"Implica√ß√£o",status:"pending"},{id:"4",name:"Necessidade",status:"pending"}],nextStep:"Pr√≥ximo Passo SPIN",nextStepQuestion:"",leadProfile:"rational",buyingSignalsCount:0,activeSpeaker:"lead",currentSpinPhase:null,cards:[],toggleMinimize:()=>e(o=>({isMinimized:!o.isMinimized})),toggleTheme:()=>e(o=>({isDark:!o.isDark})),setConnectionStatus:o=>e({connectionStatus:o}),startTimer:()=>{t().startTime||e({startTime:Date.now()})},stopTimer:()=>e({startTime:null}),addCard:o=>e(i=>({cards:[{id:Math.random().toString(36).substring(7),timestamp:Date.now(),isDismissed:!1,...o},...i.cards].slice(0,20)})),dismissCard:o=>e(i=>({cards:i.cards.map(s=>s.id===o?{...s,isDismissed:!0}:s)})),setStage:o=>e(i=>({currentStageIndex:o,stages:i.stages.map((s,l)=>({...s,status:l<o?"completed":l===o?"current":"pending"}))})),setLeadProfile:o=>e({leadProfile:o}),setSpeaker:o=>e({activeSpeaker:o}),setCallSummary:o=>e({showEndModal:o}),setSpinPhase:o=>e({currentSpinPhase:o}),cachedObjections:[],scriptId:null,cacheTimestamp:null,loadScriptData:(o,i)=>{console.log(`üì¶ Caching ${i.length} objections for script ${o}`),e({scriptId:o,cachedObjections:i,cacheTimestamp:Date.now()})},clearCache:()=>{console.log("üóëÔ∏è Clearing objection cache"),e({cachedObjections:[],scriptId:null,cacheTimestamp:null})}}));function nt({card:e,onDismiss:t}){var h,z,y,I,N;const o=ot(S=>S.dismissCard),[i,s]=u.useState(!1),l=()=>{t?t(e.id):o(e.id)};u.useEffect(()=>{const S=setTimeout(()=>s(!0),50);return()=>clearTimeout(S)},[]);const x=(S,C)=>{if(S==="manager-whisper"||(C==null?void 0:C.source)==="manager")return n.jsx(Pe,{size:14,style:{color:m}});switch(S){case"signal":return n.jsx(Ge,{size:14,style:{color:m}});case"objection":return n.jsx(Ze,{size:14,style:{color:m}});case"tip":return n.jsx(ie,{size:14,style:{color:m}});case"alert":return n.jsx(Ye,{size:14,style:{color:Q}});case"reinforcement":return n.jsx(We,{size:14,style:{color:m}});default:return n.jsx(ie,{size:14,style:{color:k}})}};if(e.isDismissed)return null;const d=e.type==="manager-whisper"||((h=e.metadata)==null?void 0:h.source)==="manager"?"Gestor":e.type.replace("-"," "),E=((z=e.metadata)==null?void 0:z.urgency)==="high"||((y=e.metadata)==null?void 0:y.urgency)==="urgent";return n.jsxs("div",{style:{position:"relative",width:"100%",borderRadius:"8px",border:`1px solid ${v}`,padding:10,marginBottom:8,background:G,color:A,opacity:i?1:0,transform:i?"translateX(0)":"translateX(8px)",transition:"opacity 0.2s, transform 0.2s"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"space-between",gap:8,marginBottom:4},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,minWidth:0,flex:1},children:[x(e.type,e.metadata),n.jsx("span",{style:{fontSize:10,fontWeight:600,textTransform:"uppercase",letterSpacing:"0.05em",color:m,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:d}),E&&n.jsx("span",{style:{fontSize:9,fontWeight:600,color:Q,background:"rgba(220,38,38,0.15)",padding:"2px 6px",borderRadius:4,flexShrink:0},children:"Urgente"}),((I=e.metadata)==null?void 0:I.phase)&&n.jsxs("span",{style:{fontSize:9,fontWeight:600,color:k,background:v,padding:"2px 6px",borderRadius:4,flexShrink:0},children:["SPIN:",String(e.metadata.phase)]})]}),n.jsx("button",{onClick:l,style:{flexShrink:0,padding:4,borderRadius:4,border:"none",background:"transparent",color:k,cursor:"pointer",display:"flex"},"aria-label":"Fechar",children:n.jsx(ye,{size:12})})]}),n.jsx("h4",{style:{fontWeight:500,fontSize:13,marginBottom:2,color:A,lineHeight:1.25},children:e.title}),n.jsx("p",{style:{fontSize:12,color:m,lineHeight:1.5},children:e.description.split(/(\*\*.*?\*\*)/).map((S,C)=>S.startsWith("**")&&S.endsWith("**")?n.jsx("strong",{style:{color:A,fontWeight:700},children:S.slice(2,-2)},C):S)}),e.type==="objection"&&((N=e.metadata)==null?void 0:N.objection)&&n.jsxs("div",{style:{marginTop:6,display:"flex",alignItems:"center",gap:6,fontSize:11,color:m,background:Te,borderRadius:4,padding:"4px 8px",border:`1px solid ${v}`},children:[n.jsx(Fe,{size:10,style:{flexShrink:0}}),n.jsx("span",{style:{fontWeight:500,color:k},children:"Obje√ß√£o:"})," ",String(e.metadata.objection)]})]})}var ge;const re=typeof chrome<"u"&&((ge=chrome.runtime)!=null&&ge.getURL)?chrome.runtime.getURL("logo.svg"):"",U=360,it="80vh",le=48,ce=56;function st(e){const t=e.target.getRootNode();return t&&"host"in t?t.host:document.getElementById("sales-copilot-root")}function _(){return document.getElementById("sales-copilot-root")}function at(){var ee;const[e,t]=u.useState(null),[o,i]=u.useState(!0),[s,l]=u.useState([]),[x,d]=u.useState([]),[E,h]=u.useState(null),[z,y]=u.useState("warm"),[I,N]=u.useState(!1),[S,C]=u.useState(null),[T,Z]=u.useState(!1),D=u.useRef({startX:0,startY:0,startLeft:0,startTop:0,panelW:U,panelH:300});u.useEffect(()=>{const a=_();a&&chrome.storage.local.get(["sidebarPosition","sidebarMinimized","sidebarOpen"],r=>{const f=r.sidebarPosition,j=Math.max(0,window.innerWidth-U-16);a.style.left=((f==null?void 0:f.left)??j)+"px",a.style.top=((f==null?void 0:f.top)??16)+"px";const g=r.sidebarMinimized??!1,p=r.sidebarOpen===!0;if(Z(g),!p){a.style.width="0",a.style.height="0",a.style.visibility="hidden",a.style.pointerEvents="none";return}})},[]),u.useEffect(()=>{const a=_();a&&(a.style.width=T?le+"px":U+"px",a.style.height=T?ce+"px":it,chrome.storage.local.set({sidebarMinimized:T}))},[T]),u.useEffect(()=>{if(o||e)return;chrome.storage.local.set({sidebarOpen:!1}).catch(()=>{});const a=_();a&&(a.style.width="0",a.style.height="0",a.style.visibility="hidden",a.style.pointerEvents="none")},[o,e]);const J=a=>{if(a.target.closest("button"))return;const r=st(a);if(!r)return;a.preventDefault();const f=T?le:U,j=r.style.left||"",g=r.style.top||"",p=j?parseFloat(j):window.innerWidth-f-16,w=g?parseFloat(g):16,q=Number.isNaN(p)?0:Math.max(0,p),F=Number.isNaN(w)?0:Math.max(0,w);D.current={startX:a.clientX,startY:a.clientY,startLeft:q,startTop:F,panelW:f,panelH:T?ce:200};const B=R=>{const ke=R.clientX-D.current.startX,Ee=R.clientY-D.current.startY,X=_();if(X){const je=window.innerWidth-D.current.panelW-8,Ce=window.innerHeight-D.current.panelH-8,Ie=Math.max(0,Math.min(je,D.current.startLeft+ke)),Ne=Math.max(0,Math.min(Ce,D.current.startTop+Ee));X.style.left=Ie+"px",X.style.top=Ne+"px"}},te=()=>{document.removeEventListener("mousemove",B),document.removeEventListener("mouseup",te);const R=_();R&&chrome.storage.local.set({sidebarPosition:{left:parseFloat(R.style.left||"0")||0,top:parseFloat(R.style.top||"0")||0}})};document.addEventListener("mousemove",B),document.addEventListener("mouseup",te)},K=()=>Z(a=>!a);u.useEffect(()=>{we()},[]);const we=async()=>{const a=await oe.getSession();t(a),i(!1)},Me=async()=>{await oe.logout(),t(null),N(!1)};u.useEffect(()=>{const a=r=>{var f,j;if(r.type==="TRANSCRIPT_RESULT"){console.log("Sidebar received transcript:",r.data);const g={text:r.data.text,isFinal:r.data.isFinal,timestamp:r.data.timestamp,speaker:r.data.speaker||"unknown"};if(l(p=>[...p,g]),r.data.text.toLowerCase().includes("pre√ßo")){const p={id:Math.random().toString(36),type:"objection",title:"Obje√ß√£o de Pre√ßo",description:"Foque no valor, n√£o no pre√ßo. Destaque os benef√≠cios.",timestamp:Date.now(),isDismissed:!1};d(w=>[p,...w]),y("warm")}else if(r.data.text.toLowerCase().includes("interessante")){const p={id:Math.random().toString(36),type:"signal",title:"Sinal de Compra",description:"Lead engajado! Pergunte sobre o timeline de decis√£o.",timestamp:Date.now(),isDismissed:!1};d(w=>[p,...w]),y("hot")}else if(r.data.text.toLowerCase().includes("n√£o")){const p={id:Math.random().toString(36),type:"alert",title:"Poss√≠vel Obje√ß√£o",description:"Fa√ßa perguntas abertas para entender.",timestamp:Date.now(),isDismissed:!1};d(w=>[p,...w]),y("cold")}}else if(r.type==="STATUS_UPDATE")N(r.status==="RECORDING"),r.status==="RECORDING"&&typeof r.micAvailable=="boolean"&&C(r.micAvailable),r.status!=="RECORDING"&&C(null),r.status==="PERMISSION_REQUIRED"&&alert("Permiss√£o necess√°ria. Clique no √≠cone da extens√£o na barra do navegador para autorizar a captura da aba.");else if(r.type==="MANAGER_WHISPER")h({content:r.data.content,urgency:r.data.urgency,timestamp:r.data.timestamp});else if(r.type==="COACHING_MESSAGE"){const g=r.data,p=g.type==="objection"&&((f=g.metadata)==null?void 0:f.objection),w=((j=g.metadata)==null?void 0:j.phase)||null,q={S:"Situa√ß√£o",P:"Problema",I:"Implica√ß√£o",N:"Necessidade"},F={id:Math.random().toString(36).substring(7),type:p?"objection":"tip",title:p?"Obje√ß√£o Detectada":`${w?q[w]||"SPIN":"Dica"} ‚Äî Pr√≥ximo Passo`,description:g.content,timestamp:Date.now(),isDismissed:!1,metadata:{...g.metadata,urgency:g.urgency}};d(B=>[F,...B].slice(0,10)),(p||g.urgency==="high")&&y("hot")}};return chrome.runtime.onMessage.addListener(a),()=>chrome.runtime.onMessage.removeListener(a)},[]);const W={width:"100%",minHeight:0,flex:1,display:"flex",flexDirection:"column",backgroundColor:Y,fontFamily:"system-ui, -apple-system, sans-serif",color:A};return o?n.jsx("div",{style:{...W,height:"100%",display:"flex",alignItems:"center",justifyContent:"center"},children:n.jsx("span",{style:{color:m,fontSize:13},children:"Carregando..."})}):e?T?n.jsx("div",{onMouseDown:J,style:{width:"100%",height:"100%",backgroundColor:Y,display:"flex",alignItems:"center",justifyContent:"center",fontFamily:"system-ui, -apple-system, sans-serif",borderRight:`1px solid ${v}`,cursor:"move",userSelect:"none"},children:n.jsx("button",{onClick:K,title:"Expandir",style:{width:32,height:32,borderRadius:$,border:`1px solid ${v}`,background:G,color:m,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:n.jsx(ne,{size:16,style:{transform:"rotate(-90deg)"}})})}):n.jsxs("div",{style:{...W,height:"100%"},children:[n.jsxs("div",{onMouseDown:J,style:{padding:12,borderBottom:`1px solid ${v}`,display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"move",userSelect:"none",flexShrink:0},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10},children:[n.jsx(ne,{size:14,style:{color:k}}),re?n.jsx("img",{src:re,alt:"HelpSeller",style:{height:20,width:"auto"}}):n.jsx(De,{size:16,style:{color:I?Q:k}}),n.jsxs("div",{children:[n.jsxs("div",{style:{fontSize:11,fontWeight:600,color:m},children:["HelpSeller ¬∑ ",I?"Gravando":"Parado"]}),n.jsx("div",{style:{fontSize:10,color:k},children:(ee=e.user)==null?void 0:ee.email})]})]}),n.jsxs("div",{style:{display:"flex",gap:6,alignItems:"center"},onClick:a=>a.stopPropagation(),children:[n.jsx("button",{onClick:K,title:"Minimizar",style:{padding:6,background:"transparent",border:`1px solid ${v}`,borderRadius:$,color:m,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:n.jsx($e,{size:14})}),n.jsx("button",{onClick:Me,style:{padding:6,fontSize:11,background:"transparent",border:`1px solid ${v}`,borderRadius:$,color:m,cursor:"pointer"},children:"Sair"})]})]}),E&&n.jsxs("div",{style:{padding:12,background:G,borderBottom:`1px solid ${v}`,flexShrink:0},children:[n.jsxs("div",{style:{fontSize:10,fontWeight:600,marginBottom:6,color:m,textTransform:"uppercase",letterSpacing:"0.05em",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[n.jsx("span",{children:"Gestor"}),n.jsx("button",{onClick:()=>h(null),style:{background:"none",border:"none",color:k,cursor:"pointer",padding:0,display:"flex"},children:n.jsx(ye,{size:14})})]}),n.jsx("div",{style:{fontSize:13,lineHeight:1.5,color:A},children:E.content})]}),n.jsxs("div",{style:{flex:"1 1 0",minHeight:0,overflowY:"auto",padding:"12px 12px 0",borderBottom:`1px solid ${v}`,display:"flex",flexDirection:"column",gap:8,backgroundColor:Y},children:[n.jsx("div",{style:{fontSize:10,fontWeight:600,marginBottom:4,color:k,textTransform:"uppercase",letterSpacing:"0.05em",flexShrink:0},children:"Insights"}),x.length===0?n.jsx("div",{style:{fontSize:12,color:k,paddingBottom:12},children:"Aguardando an√°lise..."}):x.map(a=>n.jsx("div",{style:{flexShrink:0},children:n.jsx(nt,{card:a,onDismiss:r=>d(f=>f.filter(j=>j.id!==r))})},a.id))]}),n.jsx("div",{style:{padding:"10px 12px",borderTop:`1px solid ${v}`,flexShrink:0},children:n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,padding:"8px 10px",backgroundColor:G,border:`1px solid ${v}`,borderRadius:$,fontSize:11,color:m},children:[n.jsx(Ae,{size:12}),"Analisando em tempo real"]})})]}):n.jsxs("div",{style:{...W,height:"100%",padding:24,justifyContent:"center",alignItems:"center",textAlign:"center"},children:[n.jsx("p",{style:{fontSize:13,color:m,marginBottom:8},children:"Este painel s√≥ funciona quando voc√™ est√° logado."}),n.jsx("p",{style:{fontSize:14,fontWeight:600,color:A},children:"Fa√ßa login no √≠cone da extens√£o na barra de ferramentas do navegador."})]})}const rt=[/microfone/i,/c√¢mera/i,/camera/i,/desativar/i,/ativar/i,/ctrl\s*\+/i,/alt\s*\+/i,/devices?$/i,/configura√ß√µes/i,/settings/i,/mute/i,/unmute/i,/turn\s+(on|off)/i,/apresentar/i,/present/i,/chat/i,/meet\.google/i,/participants/i,/participantes/i,/legendas/i,/captions/i,/mais\s+op√ß√µes/i,/more\s+options/i,/sair/i,/leave/i,/^\d+$/,/^[a-z]$/i];function de(e){const t=e.trim();if(t.length<2||t.length>50)return!1;for(const o of rt)if(o.test(t))return!1;if(t.length>10){const o=Math.floor(t.length/2),i=t.substring(0,o).toLowerCase().trim(),s=t.substring(o).toLowerCase().trim();if(i===s)return!1}return!0}function be(e){let t=e.trim();t=t.replace(/devices$/i,"").trim();for(let o=Math.floor(t.length/2)-2;o<=Math.ceil(t.length/2)+2;o++)if(o>0&&o<t.length){const i=t.substring(0,o).trim(),s=t.substring(o).trim();if(i.toLowerCase()===s.toLowerCase())return i}return t}const lt=["[data-self-name]",".zWGUib",".adnwBd",".YTbUzc",".cS7aqe"];function xe(){let e="";const t=new Set;for(const i of lt)try{document.querySelectorAll(i).forEach(s=>{var d;let l="";const x=s;if(x.hasAttribute("data-self-name"))l=(x.getAttribute("data-self-name")||"").trim(),l&&(e=l);else{const E=Array.from(s.childNodes).filter(h=>h.nodeType===Node.TEXT_NODE);E.length>0?l=(E[0].textContent||"").trim():l=((d=(x.innerText||"").split(`
`)[0])==null?void 0:d.trim())||""}l&&de(l)&&t.add(l)})}catch{}const o=[];if(t.forEach(i=>{i!==e&&!o.includes(i)&&o.push(i)}),o.length===0){const s=document.title.replace(/\s*[-‚Äì]\s*Google Meet.*$/i,"").trim();s&&s!=="Meeting"&&de(s)&&o.push(s)}return{selfName:e,otherNames:o}}function ct(){const{selfName:e,otherNames:t}=xe(),o=t.filter(s=>s!==e).map(be).filter(s=>s.length>1),i=o[0]||null;(e||i||o.length>0)&&chrome.runtime.sendMessage({type:"PARTICIPANT_INFO",leadName:i||"Lead",selfName:e||"",allParticipants:o}).catch(()=>{})}let ue=null,pe=null;function me(e){const{selfName:t,otherNames:o}=xe(),i=o.filter(d=>d!==t).map(be).filter(d=>d.length>1),s=i[0]||null,l=s&&s!==e.leadName,x=t&&t!==e.selfName;(l||x)&&(l&&(e.leadName=s||""),x&&(e.selfName=t||""),chrome.runtime.sendMessage({type:"PARTICIPANT_INFO",leadName:s||"Lead",selfName:t||"",allParticipants:i}).catch(()=>{}))}function he(){if(ue)return;const e={leadName:"",selfName:""};function t(){me(e)}t(),ue=setInterval(t,2e3),pe=new MutationObserver(()=>me(e)),pe.observe(document.body,{childList:!0,subtree:!0})}function dt(){const e=['[jsname="RKGaOc"]','[jsname="EaZ7Me"]','div[role="region"]'];for(const i of e){const s=document.querySelector(i);if(s){const l=s.querySelector('[aria-label*="microphone" i], [aria-label*="microfone" i], [data-tooltip*="microphone" i], [data-tooltip*="microfone" i]');if(l)return V(l,`${i} > mic button`)}}const t=document.querySelector('button[jsname="BOHaEe"]')||document.querySelector('div[jsname="BOHaEe"]');if(t)return V(t,"jsname BOHaEe");const o=document.querySelectorAll('[aria-label*="microphone" i], [aria-label*="microfone" i]');for(const i of o)if(!(i.closest('[role="listitem"], [role="list"], [jsname="jrQDbd"], [data-participant-id]')||i.getAttribute("role")!=="button"&&i.tagName.toLowerCase()!=="button"))return V(i,"aria-label mic button");return console.log("üé§ [MIC DEBUG] No mic button found, assuming unmuted"),!1}function V(e,t){const o=e.getAttribute("data-is-muted");if(o==="true")return console.log(`üé§ [MIC DEBUG] MUTED via data-is-muted on ${t}`),!0;if(o==="false")return console.log(`üé§ [MIC DEBUG] UNMUTED via data-is-muted on ${t}`),!1;const i=e.getAttribute("aria-pressed");if(i==="true")return console.log(`üé§ [MIC DEBUG] MUTED via aria-pressed on ${t}`),!0;if(i==="false")return console.log(`üé§ [MIC DEBUG] UNMUTED via aria-pressed on ${t}`),!1;const s=(e.getAttribute("aria-label")||e.getAttribute("data-tooltip")||"").toLowerCase();return s.includes("ativar")||s.includes("turn on")||s.includes("unmute")||s.includes("ligar")?(console.log(`üé§ [MIC DEBUG] MUTED via label "${s}" on ${t}`),!0):s.includes("desativar")||s.includes("turn off")||s.includes("mute")||s.includes("desligar")?(console.log(`üé§ [MIC DEBUG] UNMUTED via label "${s}" on ${t}`),!1):(console.log(`üé§ [MIC DEBUG] Could not determine state for ${t}, assuming unmuted`),!1)}let fe=null;function ut(){if(fe)return;let e=null;console.log("üé§ [MIC MONITOR] Started mic state monitoring"),fe=setInterval(()=>{const t=dt();t!==e&&(e=t,console.log(`üé§ [MIC MONITOR] State changed: ${t?"MUTED":"UNMUTED"}`),chrome.runtime.sendMessage({type:"MIC_STATE",muted:t}).catch(()=>{}))},1e3)}console.log("HelpSeller Content Script Loaded");if(window.location.hostname==="meet.google.com"){he(),ut(),document.readyState!=="complete"&&window.addEventListener("load",()=>he());const e=()=>{chrome.runtime.sendMessage({type:"TRY_END_CALL"}).catch(()=>{})};window.addEventListener("beforeunload",e),window.addEventListener("pagehide",e)}const c=document.createElement("div");c.id="sales-copilot-root";c.style.cssText="position:fixed;width:0;height:0;z-index:2147483647;transition: width 0.2s ease, height 0.2s ease;border-radius:12px;overflow:hidden;visibility:hidden;pointer-events:none;";document.body.appendChild(c);function O(){c.style.width="0",c.style.height="0",c.style.visibility="hidden",c.style.pointerEvents="none",c.style.boxShadow="none",c.style.border="none"}function H(){c.style.width="360px",c.style.height="80vh",c.style.visibility="visible",c.style.pointerEvents="auto",c.style.boxShadow="0 4px 24px rgba(0,0,0,0.5), 0 0 0 1px rgba(255,0,122,0.1)"}chrome.storage.local.get(["sidebarPosition","sidebarOpen"],e=>{const t=e.sidebarPosition,o=Math.max(0,window.innerWidth-360-16);if(c.style.left=((t==null?void 0:t.left)??o)+"px",c.style.top=((t==null?void 0:t.top)??16)+"px",!(e.sidebarOpen===!0)){O();return}chrome.runtime.sendMessage({type:"GET_SESSION"},s=>{if(!(s!=null&&s.session)){chrome.storage.local.set({sidebarOpen:!1}).catch(()=>{}),O();return}b=!0,H()})});chrome.storage.onChanged.addListener((e,t)=>{var o;t==="local"&&((o=e.sidebarOpen)==null?void 0:o.newValue)===!1&&(b=!1,O())});const Se=c.attachShadow({mode:"open"}),ve=document.createElement("style");ve.textContent=`
    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
    }
    
    :host {
        display: block;
        width: 100%;
        height: 100%;
        min-height: 0;
    }

    :host > div {
        min-height: 0;
        height: 100%;
    }

    body, div, span, button, input, p, h1, h2, h3, h4 {
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
        line-height: 1.5;
    }
    
    /* Container base */
    .h-full { height: 100%; }
    .flex { display: flex; }
    .flex-col { flex-direction: column; }
    .items-center { align-items: center; }
    .justify-between { justify-content: space-between; }
    .space-x-2 > * + * { margin-left: 0.5rem; }
    .space-x-3 > * + * { margin-left: 0.75rem; }
    .space-y-1 > * + * { margin-top: 0.25rem; }
    .space-y-2 > * + * { margin-top: 0.5rem; }
    
    /* Colors - black + pink theme */
    .bg-\\[\\#1A1B2E\\] { background-color: #0d0d0d; }
    .bg-\\[\\#252640\\] { background-color: #1a1a1a; }
    .text-white { color: white; }
    .text-blue-400 { color: #ff007a; }
    .text-slate-400 { color: #a1a1aa; }
    .text-slate-300 { color: #d4d4d8; }
    .text-emerald-400 { color: #ff007a; }
    
    /* Borders */
    .border-b { border-bottom-width: 1px; }
    .border-white\\/10 { border-color: rgba(255, 0, 122, 0.15); }
    .border-white\\/5 { border-color: rgba(255, 0, 122, 0.08); }
    
    /* Padding & Margin */
    .p-1 { padding: 0.25rem; }
    .p-2 { padding: 0.5rem; }
    .p-3 { padding: 0.75rem; }
    .p-4 { padding: 1rem; }
    .px-4 { padding-left: 1rem; padding-right: 1rem; }
    .py-1 { padding-top: 0.25rem; padding-bottom: 0.25rem; }
    .py-2 { padding-top: 0.5rem; padding-bottom: 0.5rem; }
    .py-3 { padding-top: 0.75rem; padding-bottom: 0.75rem; }
    .mb-1 { margin-bottom: 0.25rem; }
    .mb-2 { margin-bottom: 0.5rem; }
    .mb-3 { margin-bottom: 0.75rem; }
    .mb-6 { margin-bottom: 1.5rem; }
    
    /* Sizing */
    .h-14 { height: 3.5rem; }
    .w-2 { width: 0.5rem; }
    .w-3 { width: 0.75rem; }
    .h-2 { height: 0.5rem; }
    .h-3 { height: 0.75rem; }
    .shrink-0 { flex-shrink: 0; }
    .flex-1 { flex: 1 1 0%; }
    
    /* Text */
    .text-xs { font-size: 0.75rem; }
    .text-sm { font-size: 0.875rem; }
    .text-lg { font-size: 1.125rem; }
    .font-bold { font-weight: 700; }
    .font-semibold { font-weight: 600; }
    .font-medium { font-weight: 500; }
    .font-mono { font-family: ui-monospace, monospace; }
    .uppercase { text-transform: uppercase; }
    .tracking-tight { letter-spacing: -0.025em; }
    .tracking-wider { letter-spacing: 0.05em; }
    .leading-tight { line-height: 1.25; }
    .leading-relaxed { line-height: 1.625; }
    
    /* Effects */
    .rounded { border-radius: 0.25rem; }
    .rounded-lg { border-radius: 0.5rem; }
    .rounded-full { border-radius: 9999px; }
    .opacity-50 { opacity: 0.5; }
    .opacity-80 { opacity: 0.8; }
    .opacity-90 { opacity: 0.9; }
    
    /* Transitions */
    .transition-colors { transition-property: color, background-color, border-color; transition-duration: 150ms; }
    .transition-all { transition-property: all; transition-duration: 150ms; }
    .duration-300 { transition-duration: 300ms; }
    
    /* Hover states */
    .hover\\:bg-white\\/10:hover { background-color: rgba(255, 255, 255, 0.1); }
    .hover\\:bg-white\\/5:hover { background-color: rgba(255, 255, 255, 0.05); }
    
    /* Cursor */
    .cursor-pointer { cursor: pointer; }
    
    /* Overflow */
    .overflow-y-auto { overflow-y: auto; }
    .overflow-hidden { overflow: hidden; }
    
    /* Position */
    .relative { position: relative; }
    .fixed { position: fixed; }
    
    /* Animations */
    @keyframes pulse {
        0%, 100% { opacity: 1; }
        50% { opacity: 0.5; }
    }
    .animate-pulse { animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite; }
    
    .bg-green-500 { background-color: #22c55e; }
    .bg-yellow-500 { background-color: #eab308; }
    .bg-red-500 { background-color: #ef4444; }
    
    /* Scrollbar */
    .custom-scrollbar::-webkit-scrollbar {
        width: 6px;
    }
    .custom-scrollbar::-webkit-scrollbar-track {
        background: rgba(0, 0, 0, 0.1);
    }
    .custom-scrollbar::-webkit-scrollbar-thumb {
        background: rgba(255, 0, 122, 0.35);
        border-radius: 3px;
    }
`;Se.appendChild(ve);const pt=ze.createRoot(Se);let b=!1;function L(e){chrome.storage.local.set({sidebarOpen:e}).catch(()=>{})}chrome.runtime.onMessage.addListener((e,t,o)=>{if(console.log("Content script received message:",e.type),e.type==="TOGGLE_SIDEBAR_TRUSTED")b=!b,b?H():O(),L(b),console.log("Sidebar toggled (trusted):",b?"OPEN":"CLOSED");else if(e.type==="TOGGLE_SIDEBAR")b?(b=!1,O(),L(!1),console.log("Sidebar toggled: CLOSED")):chrome.runtime.sendMessage({type:"GET_SESSION"},i=>{i!=null&&i.session&&(b=!0,H(),L(!0),console.log("Sidebar toggled: OPEN"))});else if(e.type==="OPEN_SIDEBAR")chrome.runtime.sendMessage({type:"GET_SESSION"},i=>{i!=null&&i.session&&(b=!0,H(),L(!0),console.log("Sidebar opened"))});else if(e.type==="CLOSE_SIDEBAR")b=!1,O(),L(!1),console.log("Sidebar closed");else{if(e.type==="GET_SIDEBAR_OPEN")return o({open:b}),!0;e.type==="STATUS_UPDATE"&&e.status==="RECORDING"&&window.location.hostname==="meet.google.com"&&ct()}});console.log("Rendering Sidebar component...");pt.render(n.jsx(P.StrictMode,{children:n.jsx(at,{})}));console.log("Sidebar component rendered. Host element:",c);
